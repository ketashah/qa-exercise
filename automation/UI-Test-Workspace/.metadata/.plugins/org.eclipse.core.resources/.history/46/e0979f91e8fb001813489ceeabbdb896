package selenium;

import java.util.List;

import org.openqa.selenium.*;
import org.openqa.selenium.chrome.*;
import org.openqa.selenium.support.ui.Select;

public class Soution {

	public static void main(String[] args) throws Exception {
		
		// Environment Variable PATH refers to this directory. No need to add it everytime
		// System.setProperty("webdriver.chrome.driver", "C://Selenium//chromedriver.exe");
		
		// Initialize browser
		WebDriver driver = new ChromeDriver();
		
		// Open home page of NSS-TODO-Automation
		driver.get("http://localhost/nss-todo-automation/index.php");
		
		// Maximize browser 
		driver.manage().window().maximize();
				
		try {
			List<WebElement> taskObjs = driver.findElements(By.tagName("li"));
			System.out.println(taskObjs.size());
			
			// Test different scenarios of adding Task
			TestTaskAddition(driver);
			
			// Wait for 3 seconds
			Thread.sleep(3000);
			 
			// Close browser
			driver.close();	
		}
		catch(Exception ex) {
			System.out.println(ex.getMessage());
		}
		
		
	}
	
	public static void TestTaskAddition(WebDriver driver) {
		
		WebElement txtTaskName = driver.findElement(By.xpath("//input[@name='data']"));
		WebElement btnAddTask = driver.findElement(By.xpath("//input[@value='Add']"));
		WebElement categoryDropDown = driver.findElement(By.name("category"));
		Select categorySelect = new Select(categoryDropDown);
		
		// Case 1: Create task without name shouldn't add any task
		List<WebElement> taskListBefore = driver.findElements(By.tagName("li"));
		txtTaskName.clear();
		btnAddTask.click();
		btnAddTask.submit();
		List<WebElement> taskListAfter = driver.findElements(By.tagName("li"));
		if(taskListBefore.size() == taskListAfter.size()) {
			System.out.println("PASS - Empty Task should not be created");
		}
		else {
			System.out.println("FAIL - Empty Task should not be created");
		}
		
		// Case 2: Create task without category
		String taskName = "Test task without category";
		txtTaskName.sendKeys(taskName);
		btnAddTask.click();
		if(!driver.findElements(By.xpath("//*[text() [contains(.,'" + taskName + "')]]")).isEmpty()) {
			System.out.println("PASS - Task Creation without category");
		}
		else {
			System.out.println("FAIL - Task Creation without category");
		}
		
		
		// Case 3: Create task without category
		String taskName2 = "Test task with category";
		txtTaskName.sendKeys(taskName2);
		categorySelect.selectByVisibleText("Play");
		btnAddTask.click();
		if(!driver.findElements(By.xpath("//*[text() [contains(.,'" + taskName2 + "')]]")).isEmpty()) {
			System.out.println("PASS - Task Creation with category");
		}
		else {
			System.out.println("FAIL - Task Creation with category");
		}
		
		
		// Case 4: Create task with due date
		
	}

}
